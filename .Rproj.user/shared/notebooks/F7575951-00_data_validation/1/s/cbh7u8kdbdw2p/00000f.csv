"0","# 1. Validar DNI: 8 dígitos y que no sea '00000000' ni '99999999'"
"0","datos <- datos %>%"
"0","  mutate("
"0","    dni_valido = case_when("
"0","      is.na(upch_ei_dni) ~ ""Sin DNI"",  "
"0","      nchar(upch_ei_dni) == 8 & !upch_ei_dni %in% c(""00000000"", ""99999999"") ~ ""Válido"","
"0","      TRUE ~ ""Inválido"""
"0","    )"
"0","  )"
"0",""
"0","# 2. Conteo de DNIs válidos e inválidos por comunidad"
"0","conteo_dni_comunidad <- datos %>%"
"0","  group_by(comunidad_nombre, dni_valido) %>%"
"0","  summarise(total = n(), .groups = ""drop"")"
"0",""
"0","# 3. Mostrar el resultado"
"0","print(conteo_dni_comunidad)"
